{"ast":null,"code":"var _jsxFileName = \"/Users/lihing1994/Desktop/willitend.com-home/src/components/CreateAccount.js\",\n    _s = $RefreshSig$();\n\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport allStates from \"./allstates.json\";\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport Container from '@material-ui/core/Container';\nimport CryptoJS from 'crypto-js';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Encryptjs from 'encryptjs';\nimport FormAlert from \"./FormAlert.js\";\nimport Grid from '@material-ui/core/Grid';\nimport Link from '@material-ui/core/Link';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport React, { useState } from 'react';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport CryptoService from \"../../services/Crypto.service.js\";\nimport WillitendService from \"../../services/Willitend.service.js\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center'\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.primary.light\n  },\n  form: {\n    width: '100%',\n    // Fix IE 11 issue.\n    marginTop: theme.spacing(3)\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  },\n  menu: {\n    width: 200\n  }\n}));\nexport default function CreateAccount() {\n  _s();\n\n  const [username, setUsername] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [place, setPlace] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [status, setStatusBase] = useState(\"\");\n\n  const validateEmail = email => {\n    var mailformat = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/;\n\n    if (email.match(mailformat)) {\n      return true;\n    } else {\n      alert(\"You have entered an invalid email address!\");\n      return false;\n    }\n  };\n\n  const handleUsernameChange = event => {\n    setUsername(event.target.value);\n  };\n\n  const handleEmailChange = event => {\n    setEmail(event.target.value);\n  };\n\n  const handlePlaceChange = event => {\n    setPlace(event.target.value);\n  };\n\n  const handlePasswordChange = event => {\n    setPassword(event.target.value);\n  };\n\n  const handleForm = e => {\n    e.preventDefault();\n\n    if (!username || !email || !place || !password) {\n      alert(\"One or more field is empty\");\n    } else {\n      /* encryption */\n      if (validateEmail(email)) {\n        var user = {\n          email: email,\n          state: place,\n          password: password,\n          username: username\n        };\n        CryptoService.getUserPublicKey(username).then(resUser => {});\n        WillitendService.createUser(user).catch(e => {\n          console.log(e);\n        });\n        setUsername(\"\");\n        setEmail(\"\");\n        setPlace(\"\");\n        setPassword(\"\");\n        setStatusBase({\n          msg: \"Account Creation Successful\",\n          key: Math.random()\n        });\n      }\n    }\n  };\n\n  const classes = useStyles();\n  return /*#__PURE__*/_jsxDEV(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    children: [/*#__PURE__*/_jsxDEV(CssBaseline, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.paper,\n      children: [/*#__PURE__*/_jsxDEV(Avatar, {\n        className: classes.avatar,\n        children: /*#__PURE__*/_jsxDEV(AccountCircleIcon, {\n          fontSize: \"small\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        component: \"h1\",\n        variant: \"h5\",\n        children: \"Create Account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: classes.form,\n        noValidate: true,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 2,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(TextField, {\n              variant: \"outlined\",\n              required: true,\n              fullWidth: true,\n              id: \"username\",\n              label: \"Username\",\n              name: \"username\",\n              value: username,\n              onChange: handleUsernameChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(TextField, {\n              variant: \"outlined\",\n              required: true,\n              fullWidth: true,\n              id: \"email\",\n              label: \"Email\",\n              name: \"email\",\n              value: email,\n              onChange: handleEmailChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(TextField, {\n              fullWidth: true,\n              id: \"state\",\n              select: true,\n              label: \"State*\",\n              value: place,\n              onChange: handlePlaceChange,\n              SelectProps: {\n                MenuProps: {\n                  className: classes.menu\n                }\n              },\n              margin: \"normal\",\n              variant: \"outlined\",\n              children: allStates.map(option => /*#__PURE__*/_jsxDEV(MenuItem, {\n                value: option.id,\n                children: option.id\n              }, option.val, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 13\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(TextField, {\n              variant: \"outlined\",\n              required: true,\n              fullWidth: true,\n              name: \"password\",\n              label: \"Password\",\n              type: \"password\",\n              id: \"password\",\n              value: password,\n              onChange: handlePasswordChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          fullWidth: true,\n          variant: \"contained\",\n          color: \"primary\",\n          className: classes.submit,\n          onClick: handleForm,\n          children: \"Create Account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          justify: \"flex-end\",\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              href: \"./Login\",\n              variant: \"body2\",\n              children: \"Already have an account? Sign in\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), status ? /*#__PURE__*/_jsxDEV(FormAlert, {\n        message: status.msg\n      }, status.key, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 20\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CreateAccount, \"a+uPHjIymRholiXLDTr8uHBzmT4=\", false, function () {\n  return [useStyles];\n});\n\n_c = CreateAccount;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateAccount\");","map":{"version":3,"sources":["/Users/lihing1994/Desktop/willitend.com-home/src/components/CreateAccount.js"],"names":["AccountCircleIcon","allStates","Avatar","Button","Container","CryptoJS","CssBaseline","Encryptjs","FormAlert","Grid","Link","MenuItem","React","useState","TextField","Typography","CryptoService","WillitendService","makeStyles","useStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","primary","light","form","width","submit","menu","CreateAccount","username","setUsername","email","setEmail","place","setPlace","password","setPassword","status","setStatusBase","validateEmail","mailformat","match","alert","handleUsernameChange","event","target","value","handleEmailChange","handlePlaceChange","handlePasswordChange","handleForm","e","preventDefault","user","state","getUserPublicKey","then","resUser","createUser","catch","console","log","msg","key","Math","random","classes","MenuProps","className","map","option","id","val"],"mappings":"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","sourcesContent":["import AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport allStates from \"./allstates.json\";\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport Container from '@material-ui/core/Container';\nimport CryptoJS from 'crypto-js';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Encryptjs from 'encryptjs'; \nimport FormAlert from \"./FormAlert.js\";\nimport Grid from '@material-ui/core/Grid';\nimport Link from '@material-ui/core/Link';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport React, { useState } from 'react';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport CryptoService from \"../../services/Crypto.service.js\";\nimport WillitendService from \"../../services/Willitend.service.js\";\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.primary.light,\n  },\n  form: {\n    width: '100%', // Fix IE 11 issue.\n    marginTop: theme.spacing(3),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n  menu: {\n    width: 200,\n  },\n}));\n\nexport default function CreateAccount() {\n\n  const [username, setUsername] = useState(\"\");\n  const [email, setEmail] = useState(\"\"); \n  const [place, setPlace] = useState(\"\");\n  const [password, setPassword] = useState(\"\");  \n  const [status, setStatusBase] = useState(\"\"); \n\n  const validateEmail = (email) => {\n\n    var mailformat = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/;\n\n    if(email.match(mailformat)) {\n        return true;\n      } else {\n        alert(\"You have entered an invalid email address!\");\n              return false;\n    }\n  }\n\n  const handleUsernameChange = (event) => {\n    setUsername(event.target.value);\n  }; \n\n  const handleEmailChange = (event) => {\n    setEmail(event.target.value);\n  }; \n\n  const handlePlaceChange = (event) => {\n    setPlace(event.target.value);\n  };\n\n  const handlePasswordChange = (event) => {\n    setPassword(event.target.value);\n  };\n\n  const handleForm =  (e) => {\n    e.preventDefault();\n\n    if (!username || !email || !place || !password) {\n      alert(\"One or more field is empty\"); \n    } else {\n\n      /* encryption */\n\n      if (validateEmail(email)) {\n        var user =  {\n          email: email, \n          state: place, \n          password: password, \n          username: username, \n        };\n\n    CryptoService.getUserPublicKey(username)\n                  .then((resUser) => {\n                    \n                  }) \n\n    WillitendService.createUser(user)\n      .catch(e => {\n        console.log(e);\n      });\n\n    setUsername(\"\"); \n    setEmail(\"\"); \n    setPlace(\"\"); \n    setPassword(\"\");\n    setStatusBase({ msg: \"Account Creation Successful\", key: Math.random() });\n    }\n  }\n\n  }\n\n\n  const classes = useStyles();\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <CssBaseline />\n      <div className={classes.paper}>\n        <Avatar className={classes.avatar}>\n         {<AccountCircleIcon fontSize=\"small\" />} \n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          Create Account\n        </Typography>\n        <form className={classes.form} noValidate>\n          <Grid container={true} spacing={2}>\n            <Grid item xs={12}>\n              <TextField\n                variant=\"outlined\"\n                required\n                fullWidth\n                id=\"username\"\n                label=\"Username\"\n                name=\"username\"\n                value = {username}\n                onChange = {handleUsernameChange}\n                \n              />\n            </Grid>\n            <Grid item xs={12}>\n              <TextField\n                variant=\"outlined\"\n                required\n                fullWidth\n                id=\"email\"\n                label=\"Email\"\n                name=\"email\"\n                value = {email}\n                onChange = {handleEmailChange}\n              />\n            </Grid>\n            <Grid item xs={12}>\n            <TextField\n            fullWidth\n          id=\"state\"\n          select\n          label=\"State*\"\n          value={place}\n          onChange={handlePlaceChange}\n          SelectProps={{\n            MenuProps: {\n              className: classes.menu,\n            },\n          }}\n          margin=\"normal\"\n          variant=\"outlined\"\n        >\n          {allStates.map(option => (\n            <MenuItem key={option.val} value={option.id}>\n              {option.id}\n            </MenuItem>\n          ))}\n          </TextField>\n        </Grid>\n            <Grid item xs={12}>\n              <TextField\n                variant=\"outlined\"\n                required\n                fullWidth\n                name=\"password\"\n                label=\"Password\"\n                type=\"password\"\n                id=\"password\"\n                value = {password}\n                onChange = {handlePasswordChange}\n              />\n            </Grid>\n          </Grid>\n          <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.submit}\n            onClick = {handleForm}\n          >\n            Create Account \n          </Button>\n          <Grid container={true} justify=\"flex-end\">\n            <Grid item>\n              <Link href=\"./Login\" variant=\"body2\">\n                Already have an account? Sign in\n              </Link>\n            </Grid>\n          </Grid>\n        </form>\n\n         {status ? <FormAlert key={status.key} message={status.msg} /> : null}\n\n        <br/>\n        <br/>\n\n\n      </div>\n    </Container>\n  );\n}"]},"metadata":{},"sourceType":"module"}